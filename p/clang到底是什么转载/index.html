<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='最近发现自己对 GNU GCC 和 Clang 的区别不太清楚，影响到一些实现和学习，所以趁这两天有空好好研究了一下。 在这个研究过程中，我发现很多问题其实源自于语言（'>
<title>Clang到底是什么?(转载)</title>

<link rel='canonical' href='https://joker0ops.github.io/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/'>

<link rel="stylesheet" href="/scss/style.min.281d61a7f18551897752370d6d6be99bfa8d049e9ccb27a3ef34ec42d1ba7e47.css"><meta property='og:title' content='Clang到底是什么?(转载)'>
<meta property='og:description' content='最近发现自己对 GNU GCC 和 Clang 的区别不太清楚，影响到一些实现和学习，所以趁这两天有空好好研究了一下。 在这个研究过程中，我发现很多问题其实源自于语言（'>
<meta property='og:url' content='https://joker0ops.github.io/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/'>
<meta property='og:site_name' content='木木龙的个人博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='C&#43;&#43;' /><meta property='article:published_time' content='2025-09-04T17:45:36&#43;08:00'/><meta property='article:modified_time' content='2025-09-04T17:45:36&#43;08:00'/>
<meta name="twitter:title" content="Clang到底是什么?(转载)">
<meta name="twitter:description" content="最近发现自己对 GNU GCC 和 Clang 的区别不太清楚，影响到一些实现和学习，所以趁这两天有空好好研究了一下。 在这个研究过程中，我发现很多问题其实源自于语言（">
    <link rel="shortcut icon" href="/favicon.ico" />
<style type="text/css">
     
    html{cursor:url('/cursor/01.cur'), default !important;}
    a:hover{cursor:url('/cursor/03.cur'), pointer !important;}
    button:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    i:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    input{cursor: url('/cursor/06.cur'), text !important;}
    #dark-mode-toggle:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    .fui-eye:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    .fui-user:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    .fui-photo:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    .fui-info-circle:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    .fui-home:hover{cursor: url('/cursor/03.cur'), pointer !important;}
    .fui-cross:hover{cursor: url('/cursor/03.cur'), pointer !important;}
     
    .fireworks {
        position: fixed;
        pointer-events: none;
        top: 0;
        left: 0;
        height: 100%;
    }
     
    img.site-logo {
         
        transition: all 1.65s   
    }
    img.site-logo:hover {
        transform: rotate(360deg);
        -webkit-transform: rotate(360deg);
        -moz-transform: rotate(360deg);
        -o-transform: rotate(360deg);
        -ms-transform: rotate(360deg);
    }
</style>
<canvas class="fireworks" id="fireworks"></canvas>
<script src="/js/anime.min.js"></script>
<script src="/js/fireworks.js"></script>
<script src="/js/jquery-3.7.1.min.js"></script>
<script src="/js/jquery-ui-1.14.0/jquery-ui.min.js"></script>
<link rel="stylesheet" type="text/css" href="/css/waifu.min.css">
<script>setCanvasSize();</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/Avatar_hu5179492d212c9c841146f5622b7e2dae_1451194_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">😍</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">木木龙的个人博客</a></h1>
            <h2 class="site-description">热爱可抵岁月漫长</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://space.bilibili.com/375616854'
                        target="_blank"
                        title="Bilibili"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <path d="M488.6 104.1C505.3 122.2 513 143.8 511.9 169.8V372.2C511.5 398.6 502.7 420.3 485.4 437.3C468.2 454.3 446.3 463.2 419.9 464H92.02C65.57 463.2 43.81 454.2 26.74 436.8C9.682 419.4 .7667 396.5 0 368.2V169.8C.7667 143.8 9.682 122.2 26.74 104.1C43.81 87.75 65.57 78.77 92.02 78H121.4L96.05 52.19C90.3 46.46 87.42 39.19 87.42 30.4C87.42 21.6 90.3 14.34 96.05 8.603C101.8 2.868 109.1 0 117.9 0C126.7 0 134 2.868 139.8 8.603L213.1 78H301.1L375.6 8.603C381.7 2.868 389.2 0 398 0C406.8 0 414.1 2.868 419.9 8.603C425.6 14.34 428.5 21.6 428.5 30.4C428.5 39.19 425.6 46.46 419.9 52.19L394.6 78L423.9 78C450.3 78.77 471.9 87.75 488.6 104.1H488.6zM449.8 173.8C449.4 164.2 446.1 156.4 439.1 150.3C433.9 144.2 425.1 140.9 416.4 140.5H96.05C86.46 140.9 78.6 144.2 72.47 150.3C66.33 156.4 63.07 164.2 62.69 173.8V368.2C62.69 377.4 65.95 385.2 72.47 391.7C78.99 398.2 86.85 401.5 96.05 401.5H416.4C425.6 401.5 433.4 398.2 439.7 391.7C446 385.2 449.4 377.4 449.8 368.2L449.8 173.8zM185.5 216.5C191.8 222.8 195.2 230.6 195.6 239.7V273C195.2 282.2 191.9 289.9 185.8 296.2C179.6 302.5 171.8 305.7 162.2 305.7C152.6 305.7 144.7 302.5 138.6 296.2C132.5 289.9 129.2 282.2 128.8 273V239.7C129.2 230.6 132.6 222.8 138.9 216.5C145.2 210.2 152.1 206.9 162.2 206.5C171.4 206.9 179.2 210.2 185.5 216.5H185.5zM377 216.5C383.3 222.8 386.7 230.6 387.1 239.7V273C386.7 282.2 383.4 289.9 377.3 296.2C371.2 302.5 363.3 305.7 353.7 305.7C344.1 305.7 336.3 302.5 330.1 296.2C323.1 289.9 320.7 282.2 320.4 273V239.7C320.7 230.6 324.1 222.8 330.4 216.5C336.7 210.2 344.5 206.9 353.7 206.5C362.9 206.9 370.7 210.2 377 216.5H377z"/>
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://github.com/joker0ops'
                        target="_blank"
                        title="Github"
                        rel="me"
                    >
                        
                        
                            <?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
  <path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/>
</svg>
                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://x.com/Joker0ops'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <!--
version: "2.9"
unicode: "f7eb"
-->
<svg
    xmlns="http://www.w3.org/2000/svg"
    class="icon icon-tabler icon-tabler-brand-github" 
    width="24"
    height="24"
    viewBox="0 0 24 24" 
    fill="black" 
>
  <path d="M14.058 3.41c-1.807 .767 -2.995 2.453 -3.056 4.38l-.002 .182l-.243 -.023c-2.392 -.269 -4.498 -1.512 -5.944 -3.531a1 1 0 0 0 -1.685 .092l-.097 .186l-.049 .099c-.719 1.485 -1.19 3.29 -1.017 5.203l.03 .273c.283 2.263 1.5 4.215 3.779 5.679l.173 .107l-.081 .043c-1.315 .663 -2.518 .952 -3.827 .9c-1.056 -.04 -1.446 1.372 -.518 1.878c3.598 1.961 7.461 2.566 10.792 1.6c4.06 -1.18 7.152 -4.223 8.335 -8.433l.127 -.495c.238 -.993 .372 -2.006 .401 -3.024l.003 -.332l.393 -.779l.44 -.862l.214 -.434l.118 -.247c.265 -.565 .456 -1.033 .574 -1.43l.014 -.056l.008 -.018c.22 -.593 -.166 -1.358 -.941 -1.358l-.122 .007a.997 .997 0 0 0 -.231 .057l-.086 .038a7.46 7.46 0 0 1 -.88 .36l-.356 .115l-.271 .08l-.772 .214c-1.336 -1.118 -3.144 -1.254 -5.012 -.554l-.211 .084z" />
</svg>

                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E9%93%BE%E6%8E%A5/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>链接</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li>
      <ol>
        <li><a href="#像gcc这种现代叫做编译器的程序是一个工具集合">像<code>gcc</code>这种现代叫做“编译器”的程序是一个工具集合</a></li>
        <li><a href="#编译器到底是什么或者说编译流程是什么">编译器到底是什么（或者说编译流程是什么）</a></li>
        <li><a href="#从源代码转换成可执行程序的过程">从源代码转换成可执行程序的过程</a>
          <ol>
            <li><a href="#过程展示gcc和配套的cppasld处理转换程序">过程展示：gcc和配套的cpp、as、ld处理转换程序</a></li>
          </ol>
        </li>
        <li><a href="#gcc内部工作流程">gcc内部工作流程</a></li>
        <li><a href="#clang内部的工作流程">Clang内部的工作流程</a></li>
        <li><a href="#为什么clang是一个前端难道它不是完整的编译器吗如果clang是完整的编译器的话那么为什么叫前端呢如果它不是完整的那么后端是什么呢">为什么<code>clang</code>是一个前端？难道它不是完整的编译器吗？如果<code>clang</code>是完整的编译器的话，那么为什么叫前端呢？如果它不是完整的，那么后端是什么呢？</a></li>
        <li><a href="#编译器的定义到底是什么感觉书上编译器的定义和实际的gcc有所不同">编译器的定义到底是什么？感觉书上编译器的定义和实际的<code>gcc</code>有所不同</a></li>
        <li><a href="#llvm-项目是干什么项目">LLVM 项目是干什么项目？</a></li>
        <li><a href="#gcc和clang有什么区别">gcc和clang有什么区别？</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/technique/" >
                Technique
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/">Clang到底是什么?(转载)</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2025/09/04</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 10 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>最近发现自己对 <a class="link" href="https://so.csdn.net/so/search?q=GNU&amp;spm=1001.2101.3001.7020"  target="_blank" rel="noopener"
    >GNU
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a> GCC 和 Clang 的区别不太清楚，影响到一些实现和学习，所以趁这两天有空好好研究了一下。</p>
<p>在这个研究过程中，我发现很多问题其实源自于语言（不是指编程语言，而是中文和英文翻译的失真）和概念理解不严谨。</p>
<p>如果你上网去查<code>clang</code>，有些人会告诉你这是一个前端（frontend），然后从书上摘抄一些编译器的介绍，然后列出了一堆表格进行对比，并没有对原理和机制进行详尽的解释和介绍。所以这时候会有更多的问题冒出来：</p>
<ul>
<li>为什么<code>clang</code>是一个前端？难道它不是完整的编译器吗？如果<code>clang</code>是完整的编译器的话，那么为什么叫前端呢？如果它不是完整的，那么后端是什么呢？</li>
<li>编译器的定义到底是什么？感觉书上编译器的定义和实际的<code>gcc</code>有所不同。</li>
</ul>
<p><strong>这里说明一下：这里的<code>gcc</code>指的是你在 Ubuntu 等 Linux 发行版里可以直接使用的命令（来自于 GNU 软件组），如果是指项目则会写作“GNU GCC”。如果是指<code>llvm-gcc</code>，则不会简写成<code>gcc</code>。</strong></p>
<p>本文将会逐步解答这一系列的问题，在这个过程中，不光会让你搞明白<code>clang</code>到底是什么，也会让你对编译过程、编译器和<code>gcc</code>，以及 LLVM 更加了解。</p>
<h3 id="像gcc这种现代叫做编译器的程序是一个工具集合">像<code>gcc</code>这种现代叫做“编译器”的程序是一个工具集合</h3>
<p>需要先理解一件事，也算是上面绝大部分问题的答案或者误解源头：<strong>像<code>gcc</code>这种现代“编译器”是一个工具集合，包含了预处理器、编译器，而且会自己调用汇编器、连接器或加载器等多种工具，而不是单单的一个编译器</strong>（话说这种术语和名词的冲突也是误导的重要原因之一）。</p>
<p>先说出答案是为了让读者带着答案去看解释，这样能理解的更好。</p>
<h3 id="编译器到底是什么或者说编译流程是什么">编译器到底是什么（或者说编译流程是什么）</h3>
<p>上文提到，“编译器”是一个时常表达有冲突的术语：<strong>在很多言论、博客、教科书和专业书中，编译器被描述成“将源代码转换成可执行程序的程序”（比如<code>gcc</code>这个“编译器”就可以直接将源代码变成可执行程序）</strong>。这句话简洁、准确地描述了使用<code>gcc</code>命令会发生什么，但是这并不是编译器的定义。</p>
<p>我们来看看最经典的编译相关的著作《编译原理》（也就是龙书）里对于编译器的介绍，这也算是编译器最经典的含义：</p>
<blockquote>
<p>简单来说，编译器就是一个程序能读取某种语言的一个程序（这个语言是_源_语言），然后将其翻译转换成另一种语言的等价程序（这个语言被称为_目标_语言）。编译器最重要的一个规定就是报告在翻译过程中发现“源”程序的错误。<br>
如果这个目标程序是机器语言，那么这个目标程序就是可执行程序。</p>
</blockquote>
<p>说人话其实就是：我们写的源代码经过编译器转换之后得到了另一种语言的代码（目标代码），而转换之后的代码如果是机器语言，那么这个目标代码就是可执行程序。但是如果多源代码文件或者有外连接的库，那么可能是共享对象（shared object）。</p>
<blockquote>
<p>“code”在英语中是指一堆数字、字母、符号，中文翻译成“代码”或“码”<br>
应用程序本质就是一堆机器语言拼成的二进制文件。</p>
</blockquote>
<p><strong>也就是说，编译器实际上是将一种语言转换成另一种语言的程序</strong>，也就是用来翻译的程序。</p>
<p><strong>不过按照近几十年的标准编译流程来说，编译器指的是从将<code>.c</code>等文件转换成<code>.s</code>文件的程序。为了方便解释，除非特地说明，下文中的“编译器”都是按这个定义。</strong></p>
<blockquote>
<p>2024年6月4日更新：<br>
下面这个编译流程是从 FORTRAN I 开始的。FORTRAN 作为最古老的编程语言，自然也有着世界上第一个编译器。FORTRAN 的名称其实就是“Formula Translated（公式翻译）”，名称中就表达了“翻译”这一含义。</p>
</blockquote>
<p>在这个定义下，编译器内部的工作流程大致如下：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%98%E5%8C%96%E5%99%A8.png"
	width="1300"
	height="384"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%98%E5%8C%96%E5%99%A8_hu6f316253eab163c34c22e9828f4df9bd_60927_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%98%E5%8C%96%E5%99%A8_hu6f316253eab163c34c22e9828f4df9bd_60927_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="338"
		data-flex-basis="812px"
	
></p>
<p>编译器可以生成指定平台的汇编代码。然后再由汇编器来将汇编代码转成机器语言，最后由连接器连接成可执行程序。</p>
<p>此外有几点需要补充一下：</p>
<ol>
<li>这里的各种语言代码是经过预处理过的；</li>
<li>某语言的前端一般指词汇解析器（Lexer）和语法分析程序（Parser），前端会将源代码一步一步（从高级到低级）转换成优化器需要的中间表达（IR），这是多个分析器实现的的。</li>
<li>一般在优化器前面会单独列出一个“AST（Abstract Syntax Trees）”，这是一个层级很高的中间表达，基本上就是源代码的重组。</li>
<li>优化器（Optimizer）有时也被称为中端（Middle end），优化器不仅提升性能，而且作为中端可以让前后端分离的更好，增加了交叉编译的可能性。</li>
</ol>
<p>从源代码到高级中间表达，再从中级到低级的流程大致如下：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%B5%81%E7%A8%8B1.png"
	width="2120"
	height="562"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%B5%81%E7%A8%8B1_hu340a3874129649b827180554cc52488b_112160_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%B5%81%E7%A8%8B1_hu340a3874129649b827180554cc52488b_112160_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="377"
		data-flex-basis="905px"
	
></p>
<p>这里有篇文章做了更详细的介绍：<a class="link" href="https://web.stanford.edu/class/archive/cs/cs143/cs143.1128/handouts/230%20Intermediate%20Rep.pdf#:~:text=gcc%27s%20Intermediate%20Representation%20The%20gcc/g&#43;&#43;%20compiler%20uses%20an,pointer%20to%20a%20structure%20with%20a%20tag%20field"  target="_blank" rel="noopener"
    >《Intermediate Representation》
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a></p>
<h3 id="从源代码转换成可执行程序的过程">从源代码转换成可执行程序的过程</h3>
<p>从源代码转换成可执行程序的完整过程，也就是我们平时所说的“编译过程”。在过去的几十年里，这个标准流程大致如下（圆角矩形表示代码，矩形表示各种处理器）：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B.png"
	width="2316"
	height="138"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B_hu28537725652cb3df2e39bc44e03ea91b_51949_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B_hu28537725652cb3df2e39bc44e03ea91b_51949_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="1678"
		data-flex-basis="4027px"
	
></p>
<p>可以看到从源代码到可执行程序要经过预处理器（preprocessor）、编译器（compiler）、汇编器（assembler）和连接器（linker）或加载器（loader），而编译器只是负责将源代码转换成对应的汇编代码的功能。</p>
<h4 id="过程展示gcc和配套的cppasld处理转换程序">过程展示：gcc和配套的cpp、as、ld处理转换程序</h4>
<p>上文提到的的几种处理转换程序除了编译器和汇编器，其他三个估计都很很少听到。下面就用最经典的 C 语言和<code>gcc</code>来介绍这个过程，<code>gcc</code>包含的预处理器为<code>cpp</code>，还会调用汇编器<code>as</code>、连接器<code>ld</code>。</p>
<p>关于三者的介绍，以及编译过程中，每一步时如何进行的详细过程，可以看看我的另一篇文章<a class="link" href="https://blog.csdn.net/qq_33919450/article/details/131099518"  target="_blank" rel="noopener"
    >《使用gcc展示完整的编译过程》
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a>，这篇文章也通过实际操作，介绍了一些<code>gcc</code>操作方法。<strong>这篇文章非常建议读到这里就看一看，不然可能只理解字面的内容，文章内容原本是打算放在这里的，但是会让字数到 2 万字，这样阅读时间太长了</strong>。</p>
<h3 id="gcc内部工作流程">gcc内部工作流程</h3>
<p>gcc内部工作流程如下，这里忽略了预处理过程：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%98%E5%8C%96%E5%99%A82.png"
	width="2068"
	height="472"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%98%E5%8C%96%E5%99%A82_hu3616b95c14e57b3cdad4500822ee2778_84496_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%98%E5%8C%96%E5%99%A82_hu3616b95c14e57b3cdad4500822ee2778_84496_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="438"
		data-flex-basis="1051px"
	
></p>
<h3 id="clang内部的工作流程">Clang内部的工作流程</h3>
<p>随着时代的发展和进步，老式的编译流程已经不够用了：</p>
<ol>
<li>性能优化需要的人力、物力过大（现在的汇编语言要比以前的复杂太多了，经典的 PDP-11 手册里关于指令的只有 30 页不到，但是现在 Intel X86 指令手册就 2500 页）；</li>
<li>针对每种机器的开发消耗多（比如说在 ARM 和 X86 编译同一个程序）；</li>
<li>编译器的“插件”不够（有时候需要新的优化或者处理）。</li>
</ol>
<p>看到这里你便明白，这里的前端是指整个 C 语言家族的编译流程的前端，而不是一个编译器的前端。所以 clang 是一个完整的编译器，可以将<code>.c</code>转换成<code>.s</code>文件，但是可以调用汇编器和编译器生成最终的可执行文件。</p>
<p>clang 作为编译器可以将你写的 C 家族的语言转换成 LLVM IR（一种低级语言），然后转换输出一个<code>.s</code>文件，然后调用 LLVM 项目中的汇编器（或者其他汇编器）将其汇编成一个<code>.o</code>对象文件（也就是前文中提到的“汇编阶段”），最后调用连接器进行连接，输出一个可执行程序。</p>
<p>也就是之前描述的编译器内部流程变成如下流程，同样这里的省略了预处理过程：</p>
<p><img src="https://i-blog.csdnimg.cn/direct/04b18061bb7442b0bda68d822ccfe9b3.png"
	
	
	
	loading="lazy"
	
		alt="Picture"
	
	
></p>
<blockquote>
<p>2024年3月27日更新：<br>
之前没注意这个图，直接复制gcc的，忘记修改语言前端后面的内容了。在这个编译管线层级下，LLVM 的优化是对 LLVM IR 进行的，而且不止一次，这取决于你使用<code>-O几</code>，每一级优化的内容也是不同的。所以这里的优化器并不是指“只优化一次”。额外需要说明一点，<code>-O3</code>这个选项并不只在“优化器”部分优化，还会在连接的时候进行一些优化。</p>
</blockquote>
<p>而<code>clang</code>后面使用的的汇编器和连接器，既可以使用 LLVM 集成，也可以使用 GNU 的，比如连接器可以使用 LLVM 集成的的<code>lld</code>，也可以使用 GNU 的<code>ld</code>或<code>gold</code>，以及 MSVC的<code>link.exe</code>。不过默认情况下是使用 LLVM 集成的。</p>
<p>如果你好奇更详细 Clang 工作流程，和每一步的操作，比如说什么选项对应的是编译过程的某一步，可以看看这篇文档<a class="link" href="https://llvm.org/devmtg/2019-10/slides/ClangTutorial-Stulova-vanHaastregt.pdf"  target="_blank" rel="noopener"
    >《An Overview of Clang》
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a>，我就不单独写博客了。</p>
<p>这种编译方式对于适配不同平台来说非常方便。当出现一个新的平台，只要将指令与 LLVM IR 对应即可，完全不用开发者去写一个全新的优化器和代码生成器去将源代码转换成汇编代码，省时省力。</p>
<h3 id="为什么clang是一个前端难道它不是完整的编译器吗如果clang是完整的编译器的话那么为什么叫前端呢如果它不是完整的那么后端是什么呢">为什么<code>clang</code>是一个前端？难道它不是完整的编译器吗？如果<code>clang</code>是完整的编译器的话，那么为什么叫前端呢？如果它不是完整的，那么后端是什么呢？</h3>
<p>Clang 是一个完整的编译器，也是一个前端。不过是将源代码转换成可执行程序流程的前端，而不是编译器的前端。如果说是编译器的前端，那是预处理器、词义分析器（Lexer）和语法分析器（Parser）等部分构成的。</p>
<p>和<code>clang</code>对应的后端指的是 LLVM 内含的，或者 GNU 等软件组的连接器、编译器等工具，这些工具负责将汇编代码汇编、连接成最后的可执行文件。</p>
<h3 id="编译器的定义到底是什么感觉书上编译器的定义和实际的gcc有所不同">编译器的定义到底是什么？感觉书上编译器的定义和实际的<code>gcc</code>有所不同</h3>
<p>关于编译器的定义前文有详细的解释，现在一般情况下“编译器”指的是从将<code>.c</code>等文件转换成<code>.s</code>文件的程序。</p>
<p>实际上编译器，比如<code>gcc</code>包含了一些工具（比如预处理器），也会去调用其他的工具（汇编器和连接器），所以与定义有所不同。</p>
<h3 id="llvm-项目是干什么项目">LLVM 项目是干什么项目？</h3>
<p>前文提到，很多编译器是需要多个中间表达（IR）的，这些中间表达可能是词汇分析器生成的，也可能是语义分析器生成的，就很不统一，这就导致更新指令和优化性能随着数量的大幅提升成为了一件很困难的事情。</p>
<p>LLVM 全名“Low-Level Virtual Machine”，是一架构和中间表达的实现。而 LLVM 项目最初是一套围绕着 LLVM 代码的工具，C 语言和对应的 LLVM 代码如下（源自<a class="link" href="https://llvm.org/pubs/2003-05-01-GCCSummit2003.pdf"  target="_blank" rel="noopener"
    >Chris Lattner 的《Architecture for a Next-Generation GCC》
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a>）：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%AA%E4%BB%A3%E7%A0%811.png"
	width="2390"
	height="1148"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%AA%E4%BB%A3%E7%A0%811_huf5ac2cfd1b04aac5d71ff03fb08cdfe3_482946_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E4%BC%AA%E4%BB%A3%E7%A0%811_huf5ac2cfd1b04aac5d71ff03fb08cdfe3_482946_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="208"
		data-flex-basis="499px"
	
></p>
<p>LLVM 代码有三种用途：</p>
<ol>
<li>编译器的中间表达；</li>
<li>存放在硬盘里的位码（bitcode）；</li>
<li>人类可读的汇编语言表达</li>
</ol>
<p>这三种用途实际上都是等价的，要么能共用，要么有工具可以很轻松的转换，这点就让 LLVM 兼容新的机器、优化性能、开发新的语言，甚至是反汇编都是很容易的。</p>
<p>整个项目最核心内容其实就是 LLVM IR。LLVM IR 旨在成为某种“通用IR”，希望足够低级，可以将高级代码干净地映射到 LLVM IR（类似于处理器使用的指令是“通用IR”，允许将许多种不同的语言映射到这些汇编语言）。这给使用 LLVM IR 的编译器带来了性能很不错提升。</p>
<p>关于 LLVM 设计更详细的介绍还是请看文档：<a class="link" href="https://llvm.org/docs/LangRef.html"  target="_blank" rel="noopener"
    >《LLVM Language Reference Manual》
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a>。</p>
<p>关于 LLVM 带来的性能提升可以看 Intel 的这篇文章：<a class="link" href="https://www.intel.com/content/www/us/en/developer/articles/technical/adoption-of-llvm-complete-icx.html"  target="_blank" rel="noopener"
    >《Intel® C/C++ Compilers Complete Adoption of LLVM》
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a></p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%95%B0%E6%8D%AE%E5%9B%BE1.png"
	width="1932"
	height="1530"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%95%B0%E6%8D%AE%E5%9B%BE1_hu20ab777ce7cd4a2075949b64e6c3e501_237172_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%95%B0%E6%8D%AE%E5%9B%BE1_hu20ab777ce7cd4a2075949b64e6c3e501_237172_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="126"
		data-flex-basis="303px"
	
></p>
<h3 id="gcc和clang有什么区别">gcc和clang有什么区别？</h3>
<p>LLVM 早期有一个名为<code>llvm-gcc</code>的项目，它和 GNU GCC 的最大区别就在于：<strong><code>llvm-gcc</code>在编译器最后使用的是 LLVM 作为最低一级的中间表达，而不是 GNU GCC 使用的的 RTL 作为最低一级的中间表达，所以<code>llvm-gcc</code>编译器的最后一部分是处理 LLVM IR，而不是处理 RTL（Register Transfer Language）。</strong></p>
<p>其他方面，<code>llvm-gcc</code>和<code>gcc</code>一样将会输出一个汇编文件，工作原理也一样。不过可以通过使用<code>-emit-llvm</code>选项来让<code>llvm-gcc</code>输出 LLVM 字节码。</p>
<p>后来 LLVM 创始人 Chris Lattner 在苹果的时候就开创了一个中间表达全部使用 LLVM 作为中间表达的 C 语言家族的编译器，也就是 Clang。</p>
<p>虽然<code>clang</code>淘汰了<code>llvm-gcc</code>，虽然现在还是有<code>llvm-gcc</code>，但是使用率和性能都不如<code>clang</code>。也正是因为 LLVM IR，<code>Clang</code>进行反汇编也很方便。</p>
<p>下面是 Chris Lattner 简历中提到 Clang 诞生的部分（<a class="link" href="https://www.nondot.org/sabre/Resume.html#Apple"  target="_blank" rel="noopener"
    >https://www.nondot.org/sabre/Resume.html#Apple
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a>）：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E7%AE%80%E5%8E%86%E6%88%AA%E5%9B%BE.png"
	width="2806"
	height="422"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E7%AE%80%E5%8E%86%E6%88%AA%E5%9B%BE_hua6506c80c0d30e213886d39968c9a331_260486_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E7%AE%80%E5%8E%86%E6%88%AA%E5%9B%BE_hua6506c80c0d30e213886d39968c9a331_260486_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="664"
		data-flex-basis="1595px"
	
></p>
<p>这里字太小了，机翻一下：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%9C%BA%E7%BF%BB.png"
	width="2806"
	height="426"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%9C%BA%E7%BF%BB_huae73285ec2a2b07fc106d186231f26fc_256622_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/%E6%9C%BA%E7%BF%BB_huae73285ec2a2b07fc106d186231f26fc_256622_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="658"
		data-flex-basis="1580px"
	
></p>
<p>总结一下，<code>gcc</code>和<code>clang</code>的区别在于：<code>clang</code>的各个中间层均为 LLVM IR，而<code>gcc</code>的各个中间层为 RTL 或其他一些事物。</p>
<p><strong>这里需要注意一点，<code>llvm-gcc</code>和 LLVM 创始人 Chris Lattner 在<a class="link" href="https://llvm.org/pubs/2003-05-01-GCCSummit2003.pdf"  target="_blank" rel="noopener"
    >《Architecture for a Next-Generation GCC》
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a>中描述的 LLVM 编译器不是一个东西。这个 LLVM 编译器与后来的 Clang 也不是一个东西</strong>。论文中对 LLVM 编译器的示意图如下：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/LLVM%E7%A4%BA%E6%84%8F%E5%9B%BE.png"
	width="2500"
	height="714"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/LLVM%E7%A4%BA%E6%84%8F%E5%9B%BE_hu92fddb0b2470c81b82b31ea164fd5e4c_242916_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/LLVM%E7%A4%BA%E6%84%8F%E5%9B%BE_hu92fddb0b2470c81b82b31ea164fd5e4c_242916_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="350"
		data-flex-basis="840px"
	
></p>
<p>区别在于中间加了一个连接层，整个编译器中进行了两次连接。不过很明显，根据 Intel 的数据来看， LLVM 编译器的性能和效果相比 GNU GCC 差不多。不过现在你还是可以在 GitHub 上下到它，目前最新版本为 16：<a class="link" href="https://github.com/llvm/llvm-project/releases/tag/llvmorg-16.0.0"  target="_blank" rel="noopener"
    >https://github.com/llvm/llvm-project/releases/tag/llvmorg-16.0.0
<span style="white-space: nowrap;"><svg width=".7em"
    height=".7em" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
    <path d="m13 3l3.293 3.293l-7 7l1.414 1.414l7-7L21 11V3z" fill="currentColor" />
    <path d="M19 19H5V5h7l-2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-5l-2-2v7z"
        fill="currentColor">
</svg></span>

</a></p>
<p>你可以选择和<code>clang</code>一起下载：<br>
<img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/clang1.png"
	width="2506"
	height="706"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/clang1_hu1b6046d5aeee4b76a3c8b7d45bfe5f18_224992_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/clang1_hu1b6046d5aeee4b76a3c8b7d45bfe5f18_224992_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="354"
		data-flex-basis="851px"
	
></p>
<p>也可以单独下载：</p>
<p><img src="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/clang2.png"
	width="2386"
	height="358"
	srcset="/p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/clang2_hu521bbc25a70ff18611a6a43e078e211d_82274_480x0_resize_box_3.png 480w, /p/clang%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E8%BD%AC%E8%BD%BD/clang2_hu521bbc25a70ff18611a6a43e078e211d_82274_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="Picture"
	
	
		class="gallery-image" 
		data-flex-grow="666"
		data-flex-basis="1599px"
	
></p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/c&#43;&#43;/">C&#43;&#43;</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/p/gnu/gcc%E7%BC%96%E8%AF%91%E5%99%A8%E5%8F%8A%E5%85%B6%E7%BC%96%E8%AF%91%E6%B5%81%E7%A8%8B%E8%AF%A6%E8%A7%A3/">
        
        

        <div class="article-details">
            <h2 class="article-title">GNU/GCC编译器及其编译流程详解</h2>
        </div>
    </a>
</article>

            
                
<article class="">
    <a href="/p/linux%E7%9A%84%E4%BF%A1%E5%8F%B7/">
        
        

        <div class="article-details">
            <h2 class="article-title">Linux的信号</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/qt%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95_04/">
        
        
            <div class="article-image">
                <img src="/p/qt%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95_04/31.f52d43219bb57f86008e045b9c0a9716_hu257b54557e64e568910f9552664481a3_2550935_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post QT学习记录_04"
                        
                        data-hash="md5-9S1DIZu1f4YAjgRbnAqXFg==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">QT学习记录_04</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/qt%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95_03/">
        
        
            <div class="article-image">
                <img src="/p/qt%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95_03/22.7f061a0d92fd8334efdc1952d855a513_hu8c3a5b5f054fe6608239643744ee4034_521651_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post QT学习记录_03"
                        
                        data-hash="md5-fwYaDZL9gzTv3BlS2FWlEw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">QT学习记录_03</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/qt%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95_02/">
        
        
            <div class="article-image">
                <img src="/p/qt%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95_02/20.6c285e7b02356f8d34a0e48b4b65e15d_hue8028801c9f73dd91eba9fc177c5fd74_708628_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post QT学习记录_02"
                        
                        data-hash="md5-bCheewI1b400oOSLS2XhXQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">QT学习记录_02</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="joker0ops/joker0ops.github.io"
        issue-term="pathname"
        
        label="Comments"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    let utterancesLoaded = false;

    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;

        
        utterancesLoaded = true;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        if (!utterancesLoaded) return;
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2026 木木龙的个人博客. 引用请注明文章链接哦~
    </section>

    
    <section class="running-time">
        本博客已稳定运行
        <span id="runningdays" class="running-days"></span>
    </section>

    
    <section class="totalcount">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        

        发表了19篇文章 ·
        总计4万5千字
        <br>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    function backToTop() {
        document.documentElement.scrollIntoView({
        behavior: 'smooth',
        })
    }

    window.onload = function () {
        let scrollTop =
        this.document.documentElement.scrollTop || this.document.body.scrollTop
        let totopBtn = this.document.getElementById('back-to-top')
        if (scrollTop > 0) {
        totopBtn.style.display = 'inline'
        } else {
        totopBtn.style.display = 'none'
        }
    }
    
    window.onscroll = function () {
        let scrollTop =
        this.document.documentElement.scrollTop || this.document.body.scrollTop
        let totopBtn = this.document.getElementById('back-to-top')
        if (scrollTop < 200) {
        totopBtn.style.display = 'none'
        } else {
        totopBtn.style.display = 'inline'
        totopBtn.addEventListener('click', backToTop, false)
        }
    }
</script>

<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>
<div class="waifu">
    <div class="waifu-tips"></div>
    <canvas id="live2d" class="live2d"></canvas>
    <div class="waifu-tool">
        <span class="fui-home"></span>
        <span class="fui-chat"></span>
        <span class="fui-eye"></span>
        <span class="fui-user"></span>
        <span class="fui-photo"></span>
        <span class="fui-info-circle"></span>
        <span class="fui-cross"></span>
    </div>
</div>
    
<script src="/js/waifu-tips.js?v=1.4.2"></script>
<script src="/js/live2d.js?v=1.0.5"></script>

<script zIndex="-9999" src="/js/sakura.js" type="text/javascript"></script>

<script>
    let s1 = '2023-3-18'; 
    s1 = new Date(s1.replace(/-/g, "/"));
    let s2 = new Date();
    
    let diffInMilliseconds = s2.getTime() - s1.getTime();
    let totalDays = Math.floor(diffInMilliseconds / (1000 * 60 * 60 * 24));
    
    let years = s2.getFullYear() - s1.getFullYear();
    let months = s2.getMonth() - s1.getMonth();
    let days = s2.getDate() - s1.getDate();
    
    if (days < 0) {
      months -= 1;
      let prevMonth = new Date(s2.getFullYear(), s2.getMonth(), 0); 
      days += prevMonth.getDate();
    }
    if (months < 0) {
      years -= 1;
      months += 12;
    }
    
    let result = `${years}年${months}月${days}天`;
    document.getElementById('runningdays').innerHTML = result;
</script>

<a href="#" id="back-to-top" title="返回顶部"></a>


<style>
  #back-to-top {
    display: none;
    position: fixed;
    bottom: 5px;
    right: 15px;
    width: 40px;  
    height: 40px;  
    border-radius: 50%;  
    background-color: var(--body-background);
    box-shadow: var(--shadow-l2);
    font-size: 20px;  
    text-align: center;
    line-height: 38px;  
    cursor: pointer;
    transition:
      transform 0.3s ease,
      background-color 0.3s ease;  
  }

  #back-to-top:before {
    content: "";
    display: inline-block;
    position: relative;
    transform: rotate(135deg);
    height: 8px;  
    width: 8px;  
    border-width: 0 0 2px 2px;
    border-color: var(--back-to-top-color);
    border-style: solid;
  }

  #back-to-top:hover {
    transform: scale(1.1);  
    background-color: var(--accent-background);  
  }

  #back-to-top:hover:before {
    border-color: var(--accent-color);  
  }

   
  @media screen and (max-width: 768px) {
    #back-to-top {
      bottom: 5px;
      right: var(--container-padding);
      width: 30px;  
      height: 30px;
      font-size: 16px;
      line-height: 32px;
    }
  }

  @media screen and (min-width: 1024px) {
    #back-to-top {
      bottom: 10px;
      right: 20px;
    }
  }

  @media screen and (min-width: 1280px) {
    #back-to-top {
      bottom: 15px;
      right: 25px;
    }
  }

  @media screen and (min-width: 1536px) {
    #back-to-top {
      bottom: 15px;
      right: 25px;
       
    }
  }
</style>

<script type="text/javascript">
     
    live2d_settings['modelId'] = 6;                 
    live2d_settings['modelTexturesId'] = 8;         
    live2d_settings['modelStorage'] = false;        
    live2d_settings['canSwitchHitokoto'] = false;   
    live2d_settings['canCloseLive2d'] = true;       
    live2d_settings['canTurnToHomePage'] = true;    
    live2d_settings['canTurnToAboutPage'] = true;   
    live2d_settings['waifuSize'] = '280x250';       
    live2d_settings['waifuTipsSize'] = '250x70';    
    live2d_settings['waifuFontSize'] = '12px';      
    live2d_settings['waifuToolFont'] = '18px';      
    live2d_settings['waifuToolLine'] = '20px';      
    live2d_settings['waifuToolTop'] = '0px';        
    live2d_settings['waifuEdgeSide'] = 'right:80';  
    live2d_settings['waifuDraggable'] = 'axis-x';   
    live2d_settings['homePageUrl'] = 'https://joker0ops.github.io';     
    live2d_settings['aboutPageUrl'] = 'https://github.com/joker0ops';   
    live2d_settings['screenshotCaptureName'] = 'live2d.png';            
     
    initModel("/json/waifu-tips.json?v=1.4.2")
</script>
    </body>
</html>
